{% extends '::page-2cols.html.twig' %}

{% block title %}{{ 'core.main.index.title'|trans }}{% endblock %}

{% block main_menu_link_homepage %} active{% endblock %}

{% block javascripts %}
	{% if not app.user.getFirstLogin() %}
		<script type="text/javascript" src="{{ asset('bower_components/jquery-impromptu/dist/jquery-impromptu.min.js') }}"></script>
		<script type="text/javascript">
		var tourSubmitFunc = function(e,v,m,f){
					if(v === -1){
						$.prompt.prevState();
						return false;
					}
					else if(v === 1){
						$.prompt.nextState();
						return false;
					}
		},
		tourStates = [
			{
				title: 'Bienvenue !',
				html: 'Prêt à découvrir le nouveau site étu ? C\'est parti !',
				buttons: { Suivant: 1 },
				focus: 0,
				position: { container: '.page-container', x: 25, y: 15, width: 200, arrow: 'tc' },
				submit: tourSubmitFunc
			},
			{
				title: 'Flux',
				html: 'C\'est ici que tu peux voir quand tu reçois tes notifications ! Cliques-y pour accèder à ton flux !',
				buttons: { Précédent: -1, Suivant: 1 },
				focus: 1,
				position: { container: '.page-container', x: 122, y: -5, width: 300, arrow: 'tc' },
				submit: tourSubmitFunc
			},
			{
				title: 'TON flux !',
				html: 'Là, tu peux voir en un clin d\'oeil toutes les informations qui te concernent ! C\'est là que tu arrives en te connectant :)',
				buttons: { Précédent: -1, Suivant: 1 },
				focus: 1,
				position: { container: '.page-title', x: 210, y: 20, width: 250, arrow: 'lt' },
				submit: tourSubmitFunc
			},
			{
				title: 'Tiens toi informé !',
				html: 'Via le calendrier des associations, sois au courant de quand se déroule la prochaine nocturne, et dis à tout le monde que TOI, tu vas y participer !',
				buttons: { Précédent: -1, Suivant: 1 },
				focus: 1,
				position: { container: '.page-container', x: 230, y: -2, width: 305, arrow: 'tc' },
				submit: tourSubmitFunc
			},
			{
				title: 'Sociabilise-toi !',
				html: 'Parce que le site étu c\'est fait PAR les étus, POUR les étus, il est normal que vous puissiez vous exprimer ! Questions ? Réponses ? Go !',
				buttons: { Précédent: -1, Suivant: 1 },
				focus: 1,
				position: { container: '.page-container', x: 378, y: -3, width: 305, arrow: 'tc' },
				submit: tourSubmitFunc
			},
			{
				title: 'TEH ASSOCIATRON',
				html: 'Découvre les associations qui pourraient te plaire et abonne-toi à leurs actualités !',
				buttons: { Précédent: -1, Suivant: 1 },
				focus: 1,
				position: { container: '.page-container', x: 492, y: -3, width: 305, arrow: 'tc' },
				submit: tourSubmitFunc
			},
			{
				title: 'Et c\'est pas fini !',
				html: 'Quand y en a pu, y en a encore !<br />Clique ici pour accéder à la suite du menu !',
				buttons: { Précédent: -1, Suivant: 1 },
				focus: 1,
				position: { container: '.page-container', x: 930, y: 15, width: 250, arrow: 'tc' },
				submit: tourSubmitFunc
			},
			{
				title: 'Plein d\'autres services à ta disposition !',
				html: 'On n\'change pas une équipe qui gagne ! Comme sur l\'ancien site étu, tu peux retrouver tes potes sur le trombi, trouver vos intercours communs pour des parties enflammées de babyfoot au foyer, etc ...',
				buttons: { Précédent: -1, Suivant: 1 },
				focus: 1,
				position: { container: '.sidebar-title', x: -280, y: 0, width: 250, arrow: 'rt' },
				submit: tourSubmitFunc
			},
			{
				title: 'A toi d\'jouer !',
				html: 'Toute l\'équipe est très heureuse de te présenter le nouveau site étu, et espère qu\'il t\'accompagnera efficacement durant tes (pas si) nombreuses années à l\'UTT !',
				buttons: { Précédent: -1, Compris: 2 },
				focus: 1,
				position: { container: '.page-container', x: 25, y: 15, width: 500, arrow: 'tl' },
				submit: tourSubmitFunc
			}
		];

		$.prompt(tourStates);
	{% endif %}
	</script>
{% endblock %}

{% block content %}
    <div class="padding20-all">

        <div class="row-fluid home-blocks">
            <div class="span6">
                <div class="home-block home-block-course">
                    <h4>Vos prochains cours aujourd'hui</h4>

                    {% if nextCourses|length == 0 %}
                        <div class="course-full">
                            Vous n'avez plus de cours aujourd'hui.
                        </div>
                    {% else %}
                        {% for course in nextCourses %}
                            {% if course|length == 1 %}
                                <div class="course-full">
                                    <p>
                                        <strong>{{ course[0].uv }}</strong> - {{ course[0].type }}<br />
                                        <small class="muted">(à {{ course[0].start }} en {{ course[0].room }})</small>
                                    </p>
                                </div>
                            {% else %}
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="course-half">
                                            <p>
                                                <strong>{{ course[0].uv }}</strong> - {{ course[0].type }}<br />
                                                <small class="muted">
                                                    (à {{ course[0].start }} en {{ course[0].room }}, sem. {{ course[0].week }})
                                                </small>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="course-half">
                                            <p>
                                                <strong>{{ course[1].uv }}</strong> - {{ course[1].type }}<br />
                                                <small class="muted">
                                                    (à {{ course[1].start }} en {{ course[1].room }}, sem. {{ course[1].week }})
                                                </small>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    {% endif %}

                    <p class="more-link">
                        <a href="{{ path('user_schedule') }}">
                            Voir mon emploi du temps complet
                        </a>
                    </p>
                </div>
            </div>
            <div class="span6">
                <div class="home-block home-block-events">
                    <h4>Trombinoscope</h4>

                    <p>
                        Rechercher rapidement sur le trombinoscope :
                    </p>

                    <form method="get" class="form-inline" action="{{ path('trombi_index') }}">
                        {{ form_widget(trombiForm.fullName, { 'attr': { 'placeholder': 'Nom, prénom ou surnom ...' } } ) }}
                        {{ form_rest(trombiForm) }}

                        <button type="submit" class="btn">{{ 'trombi.main.index.search'|trans }}</button>
                    </form>

                    <p class="more-link">
                        <a href="{{ path('trombi_index') }}">
                            Aller sur le trombinoscope
                        </a>
                    </p>
                </div>
            </div>
        </div>

        <div class="row-fluid home-blocks">
            <div class="span6">
                <div class="home-block home-block-events">
                    <h4>Prochains événements</h4>

                    <ul>
                        <li>
                            <div class="date">
                                <span class="day">18</span><br />
                                <span class="month">août</span>
                            </div>
                            <h5>
                                <a href="">
                                    Deviens Chef d'équipe ou parrainne un nouveau pour l'inté !
                                </a>
                            </h5>
                        </li>
                        <li>
                            <div class="date">
                                <span class="day">24</span><br />
                                <span class="month">sept.</span>
                            </div>
                            <h5>
                                <a href="">
                                    Deviens Chef d'équipe ou parrainne un nouveau pour l'inté !
                                </a>
                            </h5>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="span6">
                <div class="home-block home-block-photos">
                    <h4>Dernières photos Argentique</h4>

                    <ul>
                        <li>
                            <div class="date">
                                <span>18</span><br />
                                <span>août</span>
                            </div>
                            <h5>
                                <a href="">
                                    Deviens Chef d'équipe ou parrainne un nouveau pour l'inté !
                                </a>
                            </h5>
                        </li>
                        <li>
                            <div class="date">
                                <span>24</span><br />
                                <span>sept.</span>
                            </div>
                            <h5>
                                <a href="">
                                    Deviens Chef d'équipe ou parrainne un nouveau pour l'inté !
                                </a>
                            </h5>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
{% endblock %}