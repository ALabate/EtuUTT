{% extends 'EtuCoreBundle:Admin:layout.html.twig' %}

{% block title %}{{ 'admin.user.permissions.title'|trans }}{% endblock %}

{% block titleIcon %}
	<img src="{{ asset('img/titles/gear.png') }}" alt="{{ 'base.logo.alt'|trans }}" title="{{ 'base.logo.title'|trans }}" class="page-title-icon" />
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/bundles/trombi.css') }}" type="text/css" />
{% endblock %}

{% block javascripts %}
	<script src="{{ asset('js/bundles/user.js') }}" type="text/javascript"></script>
{% endblock %}

{% block content %}
	<ul class="nav nav-tabs page-tabs">
		<li>
			<a href="{{ path('user_view', {'login': user.login}) }}?from=admin">
				<i class="icon-chevron-left"></i>
				{{ 'admin.user.permissions.back'|trans }}
			</a>
		</li>
	</ul>

	<div class="padding20-sides">
		<form method="post" class="form-horizontal">
			{% if user.isAdmin %}
				<p class="alert">
					Ce membre est administrateur: il a par défaut toutes les permissions, et elle ne peuvent pas être
					enlevées.
				</p>
			{% endif %}

			<div class="control-group">
				<label class="control-label" style="width: 45%; padding-right: 1%;" for="isAdmin">Est administrateur ?</label>
				<div class="controls">
					<input type="checkbox" name="isAdmin"{% if user.isAdmin %} checked="checked"{% endif %} />
				</div>
			</div>

			<hr />

			<div class="row-fluid">
				<div class="span6">
					{% for permission in permissions1 %}
						<div class="control-group">
							<label class="control-label" style="width: 45%; padding-right: 1%;" for="permissions[{{ permission.name }}]">{{ permission.desc }}</label>
							<div class="controls">
								<input type="checkbox" name="permissions[{{ permission.name }}]"
										{% if permission.checked %} checked="checked"{% endif %}
										{% if user.isAdmin %} disabled="disabled"{% endif %}
										/>
							</div>
						</div>
					{% endfor %}
				</div>
				<div class="span6">
					{% for permission in permissions2 %}
						<div class="control-group">
							<label class="control-label" style="width: 45%; padding-right: 1%;" for="permissions[{{ permission.name }}]">{{ permission.desc }}</label>
							<div class="controls">
								<input type="checkbox" name="permissions[{{ permission.name }}]"
										{% if permission.checked %} checked="checked"{% endif %}
										{% if user.isAdmin %} disabled="disabled"{% endif %}
										/>
							</div>
						</div>
					{% endfor %}
				</div>
			</div>

			<hr />

			<div class="control-group">
				<div class="controls">
					<button type="submit" class="btn">{{ 'admin.user.permissions.submit'|trans }}</button>
				</div>
			</div>
		</form>
	</div>
{% endblock %}