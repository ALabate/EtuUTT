{% extends '::page-2cols.html.twig' %}

{% block title %}{{ 'base.user.menu.account'|trans }}{% endblock %}

{% block titleIcon %}
	<img src="{{ asset('img/titles/user.png') }}" alt="{{ 'base.logo.alt'|trans }}" title="{{ 'base.logo.title'|trans }}" class="page-title-icon" />
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('facebox/src/facebox.css') }}" type="text/css" />
{% endblock %}

{% block javascripts %}
	<script src="{{ asset('facebox/src/facebox.js') }}" type="text/javascript"></script>

	<script type="text/javascript">
		jQuery(document).ready(function($) {
			$('#avatarUploadLink').attr('href', '#avatarUploadBox');

			$('a[rel*=facebox]').facebox({
				loading_image : '{{ asset('facebox/src/loading.gif') }}',
				close_image   : '{{ asset('facebox/src/closelabel.gif') }}'
			})
		})
	</script>
{% endblock %}

{% block content %}
	<ul class="nav nav-tabs page-tabs">
		<li>
			<a href="{{ path('user_profile') }}">
				<i class="icon-chevron-left"></i>
				Retour sur mon compte
			</a>
		</li>
	</ul>

	<div class="padding20-sides">
		<div class="hidden" id="avatarUploadBox">
			<div class="avatarUploadBox-form">
				<form method="post" action="{{ path('user_profile_avatar') }}" {{ form_enctype(avatarForm) }}>
					<h4>{{ 'user.profile.edit_avatar'|trans }}</h4>

					<img src="{{ asset('photos/'~app.user.avatar) }}" style="max-width: 100px;" alt="{{ app.user.fullName }}" title="{{ app.user.fullName }}" />

					<p>
						<br />
						{{ form_widget(avatarForm.file) }}
					</p>

					<div class="controls">
						{{ form_rest(avatarForm) }}

						<button type="submit" class="btn">{{ 'user.profile.edit'|trans }}</button>
					</div>
				</form>
			</div>
		</div>

		<form method="post">
			{{ form_errors(form) }}

			<div class="row-fluid">
				<div class="span3">
					<div class="profileEdit-avatar">
						<img src="{{ asset('photos/'~app.user.avatar) }}" alt="{{ app.user.fullName }}" title="{{ app.user.fullName }}" />

						<p>
							<br />
							<a href="{{ path('user_profile_avatar') }}" id="avatarUploadLink" rel="facebox" class="btn">
								{{ 'user.profile.edit_avatar'|trans }}
							</a>
						</p>

						<p class="display-for-phones">
							<br />
							<strong>{{ app.user.fullName }} ({{ app.user.studentId }})</strong><br />
							<strong>{{ app.user.mail }}</strong>
						</p>
					</div>

					<hr />

					<label>{{ form_label(form.website, 'user.profileEdit.website'|trans) }}</label>
					{{ form_widget(form.website) }}
					<span class="help-block">{{ form_errors(form.website) }}</span>

					<label>{{ form_label(form.facebook, 'user.profileEdit.facebook'|trans) }}</label>
					{{ form_widget(form.facebook) }}
					<span class="help-block">{{ form_errors(form.facebook) }}</span>

					<label>{{ form_label(form.twitter, 'user.profileEdit.twitter'|trans) }}</label>
					{{ form_widget(form.twitter) }}
					<span class="help-block">{{ form_errors(form.twitter) }}</span>

					<label>{{ form_label(form.linkedin, 'user.profileEdit.linkedin'|trans) }}</label>
					{{ form_widget(form.linkedin) }}
					<span class="help-block">{{ form_errors(form.linkedin) }}</span>

					<label>{{ form_label(form.viadeo, 'user.profileEdit.viadeo'|trans) }}</label>
					{{ form_widget(form.viadeo) }}
					<span class="help-block">{{ form_errors(form.viadeo) }}</span>
				</div>

				<div class="span9">
					<div class="form-horizontal">
						<div class="control-group hidden-for-phones">
							<label class="control-label">{{ 'user.profileEdit.name'|trans }}</label>
							<div class="controls profileEdit-fixedValue">
								{{ app.user.fullName }} ({{ app.user.login }})
							</div>
						</div>
						<div class="control-group hidden-for-phones">
							<label class="control-label">{{ 'user.profileEdit.studentId'|trans }}</label>
							<div class="controls profileEdit-fixedValue">
								{{ app.user.studentId }}
							</div>
						</div>
						<div class="control-group hidden-for-phones">
							<label class="control-label">{{ 'user.profileEdit.mail'|trans }}</label>
							<div class="controls profileEdit-fixedValue">
								{{ app.user.mail }}
							</div>
						</div>
						<div class="control-group hidden-for-phones">
							<label class="control-label">{{ 'user.profileEdit.formation'|trans }}</label>
							<div class="controls profileEdit-fixedValue">
								{{ app.user.niveau }} {{ app.user.filiere }} ({{ app.user.formation }})
							</div>
						</div>

						<div class="control-group">
							<label class="control-label">{{ form_label(form.phoneNumber, 'user.profileEdit.phoneNumber'|trans) }}</label>
							<div class="controls">
								{{ form_widget(form.phoneNumber) }}
								{{ form_widget(form.phoneNumberPrivacy) }}
								<span class="help-block">{{ form_errors(form.phoneNumber) }}</span>
								<span class="help-block">{{ form_errors(form.phoneNumberPrivacy) }}</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">{{ form_label(form.sex, 'user.profileEdit.sex'|trans) }}</label>
							<div class="controls">
								{{ form_widget(form.sex) }}
								{{ form_widget(form.sexPrivacy) }}
								<span class="help-block">{{ form_errors(form.sex) }}</span>
								<span class="help-block">{{ form_errors(form.sexPrivacy) }}</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">{{ form_label(form.nationality, 'user.profileEdit.nationality'|trans) }}</label>
							<div class="controls">
								{{ form_widget(form.nationality) }}
								{{ form_widget(form.nationalityPrivacy) }}
								<span class="help-block">{{ form_errors(form.nationality) }}</span>
								<span class="help-block">{{ form_errors(form.nationalityPrivacy) }}</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">{{ form_label(form.phoneNumber, 'user.profileEdit.adress'|trans) }}</label>
							<div class="controls">
								{{ form_widget(form.adress) }}
								{{ form_widget(form.adressPrivacy) }}
								<span class="help-block">{{ form_errors(form.adress) }}</span>
								<span class="help-block">{{ form_errors(form.adressPrivacy) }}</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">{{ form_label(form.postalCode, 'user.profileEdit.postalCode'|trans) }}</label>
							<div class="controls">
								{{ form_widget(form.postalCode) }}
								{{ form_widget(form.postalCodePrivacy) }}
								<span class="help-block">{{ form_errors(form.postalCode) }}</span>
								<span class="help-block">{{ form_errors(form.postalCodePrivacy) }}</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">{{ form_label(form.city, 'user.profileEdit.city'|trans) }}</label>
							<div class="controls">
								{{ form_widget(form.city) }}
								{{ form_widget(form.cityPrivacy) }}
								<span class="help-block">{{ form_errors(form.city) }}</span>
								<span class="help-block">{{ form_errors(form.cityPrivacy) }}</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">{{ form_label(form.country, 'user.profileEdit.country'|trans) }}</label>
							<div class="controls">
								{{ form_widget(form.country) }}
								{{ form_widget(form.countryPrivacy) }}
								<span class="help-block">{{ form_errors(form.country) }}</span>
								<span class="help-block">{{ form_errors(form.countryPrivacy) }}</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">{{ form_label(form.birthday, 'user.profileEdit.birthday'|trans) }}</label>
							<div class="controls">
								{{ form_widget(form.birthday) }}
								{{ form_widget(form.birthdayPrivacy) }}
								<span class="help-block">{{ form_errors(form.birthday) }}</span>
								<span class="help-block">{{ form_errors(form.birthdayPrivacy) }}</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">{{ 'user.profileEdit.birthdayOnlyAge.label'|trans }}</label>
							<div class="controls">
								{{ form_widget(form.birthdayDisplayOnlyAge) }}
								<span class="help-block">{{ 'user.profileEdit.birthdayOnlyAge.desc'|trans }}</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">{{ form_label(form.personnalMail, 'user.profileEdit.personnalMail'|trans) }}</label>
							<div class="controls">
								{{ form_widget(form.personnalMail) }}
								{{ form_widget(form.personnalMailPrivacy) }}
								<span class="help-block">{{ form_errors(form.personnalMail) }}</span>
								<span class="help-block">{{ form_errors(form.personnalMailPrivacy) }}</span>
							</div>
						</div>
						<div class="control-group">
							<label class="control-label">{{ form_label(form.language, 'user.profileEdit.language'|trans) }}</label>
							<div class="controls">
								{{ form_widget(form.language) }}
								<span class="help-block">{{ form_errors(form.language) }}</span>
							</div>
						</div>
						<div class="control-group">
							<div class="controls">
								{{ form_rest(form) }}

								<button type="submit" class="btn">{{ 'user.profile.edit'|trans }}</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
{% endblock %}