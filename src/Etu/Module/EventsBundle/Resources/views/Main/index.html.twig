{% extends '::page-2cols.html.twig' %}

{% block title %}{{ 'events.main.index.title'|trans }}{% endblock %}

{% block titleIcon %}
	<img src="{{ asset('img/titles/events.png') }}" alt="{{ 'base.logo.alt'|trans }}" title="{{ 'base.logo.title'|trans }}" class="page-title-icon" />
{% endblock %}

{% block sidebar %}
	{% if app.user %}
		{% if currentCategory == 'all' %}
			{{ render_subscribe_button('event', 0) }}
		{% else %}
			{{ render_subscribe_button('event-category', currentCategoryId) }}
		{% endif %}
	{% endif %}

	{{ parent() }}
{% endblock %}

{% block stylesheets %}
	<link href="{{ asset('fullcalendar/fullcalendar/fullcalendar.css') }}" rel="stylesheet" />
{% endblock %}

{% block javascripts %}
	<script src="{{ asset('fullcalendar/fullcalendar/fullcalendar.js') }}" type="text/javascript"></script>
	<script type="text/javascript">
		var source = '{{ path('events_find', {'category': currentCategory}) }}';
	</script>
	<script src="{{ asset('js/bundles/events_public.js') }}" type="text/javascript"></script>
{% endblock %}

{% block content %}
	<ul class="nav nav-tabs page-tabs">
		{% for availableCategory in availableCategories %}
		<li>
			<a href="{{ path('events_index', {'category': availableCategory}) }}">
				{% if availableCategory == currentCategory %}
					<strong>{{ ('events.categories.'~availableCategory)|trans }}</strong>
				{% else %}
					{{ ('events.categories.'~availableCategory)|trans }}
				{% endif %}
			</a>
		</li>
		{% endfor %}
	</ul>

	<div class="padding20-sides">
		<div id="calendar"></div>
	</div>
{% endblock %}
