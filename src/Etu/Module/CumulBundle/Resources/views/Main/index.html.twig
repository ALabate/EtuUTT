{% extends '::page-2cols.html.twig' %}

{% block title %}{{ 'cumul.main.index.title'|trans }}{% endblock %}

{% block titleIcon %}
	<img src="{{ asset('img/titles/user.png') }}" alt="{{ 'base.logo.alt'|trans }}" title="{{ 'base.logo.title'|trans }}" class="page-title-icon" />
{% endblock %}

{% block javascripts %}
    <script type="text/javascript">var logins = {{ allLogins|raw }};</script>
	<script type="text/javascript" src="{{ asset('js/bundles/cumul.js') }}"></script>
{% endblock %}

{% block content %}
	<div class="padding20-all">
        {% if not comparating %}
            <div class="align-center">
                <p>
                    Bienvenue sur le comparateur d'emplois du temps.
                </p>
                <p>
                    Cet outil vous permet de comparer les emplois du temps d'autant d'étudiants que vous le
                    souhaitez. Il vous indiquera alors quels moments de la semaine sont les plus libres pour le groupe
                    demandez.
                </p>
            </div>

            <div class="comparison-generator">
                <div class="row-fluid">
                    <div class="span4 generator-add">
                        <h4>Ajouter des étudiants</h4>

                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a href="#unique" data-toggle="tab">
                                    Individuellement
                                </a>
                            </li>
                            <li>
                                <a href="#multiple" data-toggle="tab">
                                    Par lots
                                </a>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <div class="tab-pane fade active in" id="unique">
                                <div class="align-center">
                                    <input type="text" class="generator-unique-input" placeholder="Nom, prénom, login" />
                                    <input type="hidden" class="generator-unique-hidden" value="" />

                                    <br />

                                    <a href="javascript:void(0)" class="btn btn-default generator-unique-add-button">
                                        Ajouter
                                    </a>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="multiple">
                                <p>Food truck fixie locavore, accusamus mcsweeney's marfa nulla single-origin coffee squid. Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo booth letterpress, commodo enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl cillum PBR. Homo nostrud organic, assumenda labore aesthetic magna delectus mollit. Keytar helvetica VHS salvia yr, vero magna velit sapiente labore stumptown. Vegan fanny pack odio cillum wes anderson 8-bit, sustainable jean shorts beard ut DIY ethical culpa terry richardson biodiesel. Art party scenester stumptown, tumblr butcher vero sint qui sapiente accusamus tattooed echo park.</p>
                            </div>
                        </div>
                    </div>
                    <div class="span8 generator-list">

                    </div>
                </div>

                <br />

                <div class="generator-build align-center">
                    <a href="#" class="btn btn-primary">
                        Générer la comparaison
                    </a>
                </div>
            </div>
        {% else %}
            <div class="align-center">
                <p>
                    Vous comparez actuellement les emplois du temps de <strong>{{ countUsers }} étudiants</strong>.
                </p>
                <p>
                    Les nombres affichés correspondent au nombre d'étudiants disponibles parmi la liste demandée à chaque heure.
                </p>
                <p>
                    <a href="" class="btn btn-default">Modifier les emplois du temps à comparer</a>
                </p>
            </div>

            <br />
            <hr />
            <br />

            <div class="row-fluid schedule schedule-days">
                <div class="span2 day hidden-phone">
                    {{ 'user.schedule.days.monday'|trans }}
                </div>
                <div class="span2 day hidden-phone">
                    {{ 'user.schedule.days.tuesday'|trans }}
                </div>
                <div class="span2 day hidden-phone">
                    {{ 'user.schedule.days.wednesday'|trans }}
                </div>
                <div class="span2 day hidden-phone">
                    {{ 'user.schedule.days.thursday'|trans }}
                </div>
                <div class="span2 day hidden-phone">
                    {{ 'user.schedule.days.friday'|trans }}
                </div>
                <div class="span2 day hidden-phone">
                    {{ 'user.schedule.days.sathurday'|trans }}
                </div>
                <div class="span12 day schedule-days-choose visible-phone">
                    <div class="dropdown">
                        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="icon-calendar"></i>
                            {{ 'user.schedule.days.monday'|trans }}
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                            <li>
                                <a href="{{ path('user_schedule', {'day': 'monday'}) }}">
                                    {{ 'user.schedule.days.monday'|trans }}
                                </a>
                            </li>
                            <li>
                                <a href="{{ path('user_schedule', {'day': 'tuesday'}) }}">
                                    {{ 'user.schedule.days.tuesday'|trans }}
                                </a>
                            </li>
                            <li>
                                <a href="{{ path('user_schedule', {'day': 'wednesday'}) }}">
                                    {{ 'user.schedule.days.wednesday'|trans }}
                                </a>
                            </li>
                            <li>
                                <a href="{{ path('user_schedule', {'day': 'thursday'}) }}">
                                    {{ 'user.schedule.days.thursday'|trans }}
                                </a>
                            </li>
                            <li>
                                <a href="{{ path('user_schedule', {'day': 'friday'}) }}">
                                    {{ 'user.schedule.days.friday'|trans }}
                                </a>
                            </li>
                            <li>
                                <a href="{{ path('user_schedule', {'day': 'sathurday'}) }}">
                                    {{ 'user.schedule.days.sathurday'|trans }}
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="clear"></div>

            <div class="schedule-hours">
                <div class="hour">08:00</div>
                <div class="hour">09:00</div>
                <div class="hour">10:00</div>
                <div class="hour">11:00</div>
                <div class="hour">12:00</div>
                <div class="hour">13:00</div>
                <div class="hour">14:00</div>
                <div class="hour">15:00</div>
                <div class="hour">16:00</div>
                <div class="hour">17:00</div>
                <div class="hour">18:00</div>
                <div class="hour">19:00</div>
                <div class="hour">20:00</div>
            </div>
            <div class="row-fluid schedule">
                {% for day, hours in comparison %}
                    <div class="span2 schedule-col schedule-col-{{ loop.index % 2 == 0 ? 'odd' : 'even' }}">
                        {% for hour, avUsers in hours %}
                            <div class="item item-void item1 tip {% if loop.index == 1 %} item-first{% endif %}"
                                 style="background: #547b9d; color: #ffffff; opacity: {{ avUsers|length / countUsers }};"
                                 title="{% for user in avUsers[0:5] %}
                                {{ users[user].fullName }}<br />
                                {% if avUsers|length > 5 and loop.index == 5 %}et {{ avUsers|length - 5 }} autres{% endif %}
                             {% endfor %}">
                                {{ avUsers|length }}
                            </div>
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
	</div>
{% endblock %}
